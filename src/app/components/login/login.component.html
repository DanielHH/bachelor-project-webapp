<div *ngIf="!user?.id" class="login-container">
  <div class="login-wrapper">
    <img *ngIf="!error" class="img-logo" [class.fade]="loading" src="assets/logo.svg" alt="SecTrack">
    <img *ngIf="error" class="img-logo" [class.fade]="loading" src="assets/error-logo.svg" alt="SecTrack">
    <div *ngIf="loading" class="loading-spinner">
      <mat-spinner></mat-spinner>
    </div>
    <div class="form-wrapper" [class.fade]="loading">
      <form #loginForm="ngForm" (ngSubmit)="login(loginForm)" (keydown.enter)="login(loginForm)">

        <!-- Username input -->
        <mat-form-field>
          <!--Input-->
          <input type="text" matInput name="usernameInput" [(ngModel)]="username" maxlength="128" placeholder="Användarnamn" [formControl]="usernameControl"
            (ngModelChange)="error = ''" required>
          <!--Check and clear-->
          <button mat-button class="size-medium" matSuffix mat-icon-button [disabled]="true">
            <mat-icon [style.color]="'green'" *ngIf="isValidUsername()">done</mat-icon>
          </button>
          <button mat-button class="size-medium" *ngIf="username" matSuffix mat-icon-button aria-label="Clear" (click)="username = ''"
            tabindex="-1">
            <mat-icon>close</mat-icon>
          </button>
          <!--Error-->
          <mat-error *ngIf="usernameControl.hasError('required')">Ange ett användarnamn</mat-error>
        </mat-form-field>

        <!-- Password input -->
        <mat-form-field>
          <!--Input-->
          <input type="password" matInput name="passwordInput" [(ngModel)]="password" maxlength="128" placeholder="Lösenord" [formControl]="passwordControl"
            (ngModelChange)="error = ''" required>
          <!--Check and clear-->
          <button mat-button class="size-medium" matSuffix mat-icon-button [disabled]="true">
            <mat-icon [style.color]="'green'" *ngIf="isValidPassword()">done</mat-icon>
          </button>
          <button mat-button class="size-medium" *ngIf="password" matSuffix mat-icon-button aria-label="Clear" (click)="password = ''"
            tabindex="-1">
            <mat-icon>close</mat-icon>
          </button>
          <!--Error-->
          <mat-error *ngIf="passwordControl.hasError('required')">Ange ett lösenord</mat-error>
        </mat-form-field>

        <button type="submit" class="btn btn-primary btn-login">Logga in</button>

        <div class="mat-form-field">
          <div class="mat-form-field-subscript-wrapper pt-2">
            <mat-error *ngIf="error">{{error}}</mat-error>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>
