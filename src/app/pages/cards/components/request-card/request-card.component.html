<form #requestForm="ngForm" (ngSubmit)="requestCard()">
  <app-modal [(show)]="_showModal" [modalTitle]="'Kvittera ut kort'"
  [closeName]="'Avbryt'" [submitName]="'Kvittera ut'">

    <!-- Row card info -->
    <div class="row">
      <div class="col-0 col-md-1"></div>
      <div class="col-0 col-md-10 wide-center">
        <mat-card>
          <!-- Row 1 -->
          <div class="row">
            <div class="col-0 col-md-1"></div>
            <div class="col-0 col-md-5">
              <b>Typ:</b>
            </div>
            <div class="col-0 col-md-5">
              <b>Serienummer:</b>
            </div>
            <div class="col-0 col-md-1"></div>
          </div>
          <!-- Row 2 -->
          <div class="row">
            <div class="col-0 col-md-1"></div>
            <div class="col-0 col-md-5">
              {{cardItem && cardItem.id? getCardTypeString(cardItem.cardType) : ''}}
            </div>
            <div class="col-0 col-md-5">
              {{cardItem && cardItem.id ? cardItem.cardNumber : ''}}
            </div>
            <div class="col-0 col-md-1"></div>
          </div>
          <!-- Row 3 Space -->
          <div class="row my-3"></div>
          <!-- Row 4 -->
          <div class="row">
            <div class="col-0 col-md-1"></div>
            <div class="col-0 col-md-5">
              <b>Utg책ngsdatum:</b>
            </div>
            <div class="col-0 col-md-5">
              <b>Kommentar:</b>
            </div>
            <div class="col-0 col-md-1"></div>
          </div>
          <!-- Row 5 -->
          <div class="row">
            <div class="col-0 col-md-1"></div>
            <div class="col-0 col-md-5">
              {{cardItem && cardItem.id ? utilitiesService.getDateString(cardItem.expirationDate) : ''}}
            </div>
            <div class="col-0 col-md-5">
              {{cardItem && cardItem.id && cardItem.comment ? cardItem.comment : ''}}
            </div>
            <div class="col-0 col-md-1"></div>
          </div>

        </mat-card>
      </div>
      <div class="col-0 col-md-1"></div>
    </div>

    <!-- Row Space -->
    <div class="row my-2"></div>

    <!-- Row username and location -->
    <div class="row">
      <div class="col-0 col-md-2"></div>
      <div class="col-12 col-md-4 wide-center">
        <span class="third-center">
          <mat-form-field>
            <!--Input-->
            <input id="usernameInput" name="usernameInput" [(ngModel)]="usernameInput"
            type="text" [style.color]="isValidUsername() ? 'black' : 'gray'"
              placeholder="Anv채ndarnamn" aria-label="Number" matInput
              [matAutocomplete]="userIDs" [formControl]="usernameControl"
              spellcheck="false" maxlength="128" appUsername required>
            <!--Check and clear-->
            <button mat-button class="size-medium" matSuffix mat-icon-button [disabled]="true">
              <mat-icon [style.color]="'green'" *ngIf="isValidUsername()">done</mat-icon>
            </button>
            <button mat-button class="size-medium" *ngIf="usernameInput" matSuffix mat-icon-button
            aria-label="Clear" (click)="usernameInput = ''">
              <mat-icon>close</mat-icon>
            </button>
            <!--Dropdown-->
            <mat-autocomplete #userIDs="matAutocomplete">
              <mat-option *ngFor="let user of filteredUsers | async" [value]="user.username">
                {{ user.username + '
                < ' + user.name + '>' }}
              </mat-option>
            </mat-autocomplete>
            <!--Error-->
            <mat-error *ngIf="usernameControl.hasError('required')">
              Ange ett anv채ndarnamn
            </mat-error>
            <mat-error *ngIf="!usernameControl.hasError('required') &&
            usernameControl.hasError('username')">
              Ogiltigt anv채ndarnamn
            </mat-error>
          </mat-form-field>
        </span>
      </div>
      <div class="col-12 col-md-4 wide-center">
        <mat-form-field>
          <!--Input-->
          <input matInput id="locationInput" name="locationInput" [(ngModel)]="locationInput" type="text" maxlength="128" placeholder="Plats"
            [formControl]="locationControl" required>
          <!--Check and clear-->
          <button mat-button class="size-medium" matSuffix mat-icon-button [disabled]="true">
            <mat-icon [style.color]="'green'" *ngIf="isValidLocation()">done</mat-icon>
          </button>
          <button mat-button class="size-medium" *ngIf="locationInput" matSuffix mat-icon-button aria-label="Clear" (click)="locationInput = ''">
            <mat-icon>close</mat-icon>
          </button>
          <!--Error-->
          <mat-error *ngIf="locationControl.hasError('required')">Ange en plats</mat-error>
        </mat-form-field>
      </div>
      <div class="col-0 col-md-2"></div>
    </div>
    <!-- Row Start Date -->
    <div class="row">
      <div class="col-0 col-md-3"></div>
      <div class="col-12 col-md-6 wide-center">
        <mat-form-field>
          <!--Input-->
          <input matInput id="startDateInput" name="startDateInput" type="text" [(ngModel)]="startDateInput" placeholder="Startdatum"
            [style.color]="isValidStartDate() ? 'black' : 'gray'" maxlength="10" (input)="setStartDateToDatePicker();"
            [formControl]="startDateControl" appDate required>
          <!--Check and clear-->
          <button mat-button class="size-medium" matSuffix mat-icon-button [disabled]="true">
            <mat-icon [style.color]="'green'" *ngIf="isValidStartDate()">done</mat-icon>
          </button>
          <button mat-button class="size-medium" *ngIf="startDateInput" matSuffix mat-icon-button aria-label="Clear" (click)="startDateInput = ''">
            <mat-icon>close</mat-icon>
          </button>
          <!--DatePicker-->
          <mat-datepicker #picker></mat-datepicker>
          <!--Hidden input connected to the date picker-->
          <input id="startDateDatepickerInput" name="startDateDatepickerInput" [(ngModel)]="startDateDatepickerInput"
            [matDatepicker]="picker" (dateInput)="setStartDateFromDatepicker($event);" type="hidden">
          <mat-datepicker-toggle matSuffix class="size-big" [for]="picker"></mat-datepicker-toggle>
          <!--Errors-->
          <mat-error *ngIf="startDateControl.hasError('required')">
            Ange ett startdatum
          </mat-error>
          <mat-error *ngIf="!startDateControl.hasError('required') && startDateControl.hasError('dateFormat')">
            Ogiltigt datumformat
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-0 col-md-3"></div>
    </div>
  </app-modal>
</form>

